<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>性能优化 | KitDocs.org</title>
    <meta name="description" content="致力于提供一个好用的知识文档库">
    <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.3a9e6202.css" as="style"><link rel="preload" href="/assets/js/app.13c3da71.js" as="script"><link rel="preload" href="/assets/js/46.5135e29d.js" as="script"><link rel="prefetch" href="/assets/js/23.8b93076d.js"><link rel="prefetch" href="/assets/js/2.1f3fad8a.js"><link rel="prefetch" href="/assets/js/3.91f30955.js"><link rel="prefetch" href="/assets/js/4.cffa168a.js"><link rel="prefetch" href="/assets/js/5.71c75ded.js"><link rel="prefetch" href="/assets/js/6.ddbb9b6a.js"><link rel="prefetch" href="/assets/js/7.e1b4c53e.js"><link rel="prefetch" href="/assets/js/8.9da9239f.js"><link rel="prefetch" href="/assets/js/9.795c60ef.js"><link rel="prefetch" href="/assets/js/10.208f6fd4.js"><link rel="prefetch" href="/assets/js/11.d396a558.js"><link rel="prefetch" href="/assets/js/12.b2127b02.js"><link rel="prefetch" href="/assets/js/13.858d2c5c.js"><link rel="prefetch" href="/assets/js/14.f2ff65f3.js"><link rel="prefetch" href="/assets/js/15.4da54405.js"><link rel="prefetch" href="/assets/js/16.1975f027.js"><link rel="prefetch" href="/assets/js/17.da22f7d4.js"><link rel="prefetch" href="/assets/js/18.c92ba5a1.js"><link rel="prefetch" href="/assets/js/19.3e1ab632.js"><link rel="prefetch" href="/assets/js/20.b7b48fad.js"><link rel="prefetch" href="/assets/js/21.a7e2aa26.js"><link rel="prefetch" href="/assets/js/22.f1f1d55a.js"><link rel="prefetch" href="/assets/js/24.11494ac8.js"><link rel="prefetch" href="/assets/js/25.eb5c8a24.js"><link rel="prefetch" href="/assets/js/26.53d7e9db.js"><link rel="prefetch" href="/assets/js/27.a57c4d03.js"><link rel="prefetch" href="/assets/js/28.93ddfe0b.js"><link rel="prefetch" href="/assets/js/29.06c374c6.js"><link rel="prefetch" href="/assets/js/30.6b07ca8e.js"><link rel="prefetch" href="/assets/js/31.b6038a4a.js"><link rel="prefetch" href="/assets/js/32.36cbac64.js"><link rel="prefetch" href="/assets/js/33.947c3d28.js"><link rel="prefetch" href="/assets/js/34.845055c9.js"><link rel="prefetch" href="/assets/js/35.b24acc31.js"><link rel="prefetch" href="/assets/js/36.0b9a9b9f.js"><link rel="prefetch" href="/assets/js/37.8ed9868c.js"><link rel="prefetch" href="/assets/js/38.cbaf36a4.js"><link rel="prefetch" href="/assets/js/39.cd9ae532.js"><link rel="prefetch" href="/assets/js/40.89a4036b.js"><link rel="prefetch" href="/assets/js/41.1cad646a.js"><link rel="prefetch" href="/assets/js/42.b3039580.js"><link rel="prefetch" href="/assets/js/43.06c9993a.js"><link rel="prefetch" href="/assets/js/44.28133afd.js"><link rel="prefetch" href="/assets/js/45.b16cf3b6.js"><link rel="prefetch" href="/assets/js/47.7a2388da.js"><link rel="prefetch" href="/assets/js/48.1153fa41.js"><link rel="prefetch" href="/assets/js/49.3fd46915.js"><link rel="prefetch" href="/assets/js/50.06d9b0f4.js"><link rel="prefetch" href="/assets/js/51.4956d81a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.7b508205.js"><link rel="prefetch" href="/assets/js/53.68595065.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3a9e6202.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">KitDocs.org</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/news/" class="nav-link">资讯</a></div><div class="nav-item"><a href="/topic/" class="nav-link router-link-active">知识库</a></div><div class="nav-item"><a href="/favorite/" class="nav-link">收藏</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/about.html" class="nav-link">关于我们</a></div> <a href="https://github.com/kitdocs/kitdocs.org" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/news/" class="nav-link">资讯</a></div><div class="nav-item"><a href="/topic/" class="nav-link router-link-active">知识库</a></div><div class="nav-item"><a href="/favorite/" class="nav-link">收藏</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/about.html" class="nav-link">关于我们</a></div> <a href="https://github.com/kitdocs/kitdocs.org" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>知识库</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/topic/" class="sidebar-link">知识库</a></li><li><a href="/topic/miniapp/" class="sidebar-link">小程序</a></li><li><a href="/topic/git/" class="sidebar-link">Git</a></li><li><a href="/topic/html/" class="sidebar-link">HTML</a></li><li><a href="/topic/css/" class="sidebar-link">CSS</a></li><li><a href="/topic/javascript/" class="sidebar-link">JavaScript</a></li><li><a href="/topic/nodejs/" class="sidebar-link">NodeJS</a></li><li><a href="/topic/ECMAScript/" class="sidebar-link">ECMAScript</a></li><li><a href="/topic/vue/" class="sidebar-link">Vue</a></li><li><a href="/topic/algorithm/" class="sidebar-link">算法</a></li><li><a href="/topic/benchmark/" class="sidebar-link">基准测试</a></li><li><a href="/topic/performance/" class="active sidebar-link">性能优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/topic/performance/#用户感受" class="sidebar-link">用户感受</a></li><li class="sidebar-sub-header"><a href="/topic/performance/#一秒钟法则" class="sidebar-link">一秒钟法则</a></li><li class="sidebar-sub-header"><a href="/topic/performance/#优化方案" class="sidebar-link">优化方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/topic/performance/#网络相关" class="sidebar-link">网络相关</a></li><li class="sidebar-sub-header"><a href="/topic/performance/#资源加载" class="sidebar-link">资源加载</a></li><li class="sidebar-sub-header"><a href="/topic/performance/#图片的使用" class="sidebar-link">图片的使用</a></li><li class="sidebar-sub-header"><a href="/topic/performance/#浏览器渲染性能" class="sidebar-link">浏览器渲染性能</a></li><li class="sidebar-sub-header"><a href="/topic/performance/#服务器配置" class="sidebar-link">服务器配置</a></li><li class="sidebar-sub-header"><a href="/topic/performance/#代码规范" class="sidebar-link">代码规范</a></li><li class="sidebar-sub-header"><a href="/topic/performance/#优化的方向" class="sidebar-link">优化的方向</a></li></ul></li></ul></li><li><a href="/topic/markdown/" class="sidebar-link">MarkDown</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="性能优化"><a href="#性能优化" aria-hidden="true" class="header-anchor">#</a> 性能优化</h1> <p>TL;DR</p> <p>此文主要参考以下内容：</p> <ul><li><a href="https://developers.google.com/web/tools/chrome-devtools/" target="_blank" rel="noopener noreferrer">chrome-devtools<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://developers.google.com/web/fundamentals/performance/rail?hl=zh-cn" target="_blank" rel="noopener noreferrer">performance<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://ddtalk.github.io/blog/2015/09/07/dingding-first/" target="_blank" rel="noopener noreferrer">H5性能优化方案<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/measure-crp?hl=zh-cn" target="_blank" rel="noopener noreferrer">Navigation Timing<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.cnblogs.com/mrsunny/archive/2012/09/04/2670727.html" target="_blank" rel="noopener noreferrer">Navigation Timing API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://developers.google.com/web/tools/chrome-devtools/network-performance/understanding-resource-timing" target="_blank" rel="noopener noreferrer">了解 Resource Timing<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.infoq.com/cn/articles/practice-of-create-a-sub-page-loading-speed-shop" target="_blank" rel="noopener noreferrer">打造亚秒级页面加载速度网店实践经验<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="用户感受"><a href="#用户感受" aria-hidden="true" class="header-anchor">#</a> 用户感受</h2> <p>当用户能够在1-2秒内打开H5页面，看到信息的展示，或者能够开始进行下一步的操作，用户会感觉速度还好，可以接受；而页面如果在2-5秒后才进入可用的状态，用户的耐心会逐渐丧失；而如果一个界面超过5秒甚至更久才能显示出来，这对用户来说基本是无法忍受的，也许有一部分用户会退出重新进入，但更多的用户会直接放弃使用。</p> <h2 id="一秒钟法则"><a href="#一秒钟法则" aria-hidden="true" class="header-anchor">#</a> 一秒钟法则</h2> <p><img src="/assets/img/h5-mobile.20e9e482.jpg" alt="手机接入服务器流程"><br>
这是一张手机端接入服务器的流程。</p> <p>首先，手机要通过无线网络协议，从基站获得无线链路分配，才能跟网络进行通讯。 无线网络基站、基站控制器这方面，会给手机进行信号的分配，已完成手机连接和交互。 获得无线链路后，会进行网络附着、加密、鉴权，核心网络会检查你是不是可以连接在这个网络上，是否开通套餐，是不是漫游等。核心网络有SGSN和GGSN，在这一步完成无线网络协议和有线以太网的协议转换。再下一步，核心网络会给你进行APN选择、IP分配、启动计费。 再往下面，才是传统网络的步骤：DNS查询、响应，建立TCP链接，HTTP GET，RTTP RESPONSE 200 OK，HTTP RESPONSE DATA，LAST HTTP RESPONSE DATA，开始UI展现。</p> <p>可见，通过运营商的网络上网，情况比较复杂，经过的节点太多；运营商的网络信号强度变化频繁，连接状态切换快；网络延迟高、丢包率高；网络建立连接的代价高，传输速度快慢不等（从2G到4G，相差很大）。</p> <p>而我们优化的目标，就是所谓的<strong>一秒钟法则</strong>，即达成以下的标准：</p> <ul><li>2g网络：1秒内完成dns查询、和后台服务器建立连接</li> <li>3g网络：1秒内完成首字显示（首字时间）</li> <li>wifi网络：1秒内完成首屏显示（首屏时间）</li></ul> <h2 id="优化方案"><a href="#优化方案" aria-hidden="true" class="header-anchor">#</a> 优化方案</h2> <p><img src="/assets/img/timing-overview.7e63b017.png" alt="Navigation Timing"><br>
导航计时（<a href="https://www.w3.org/TR/navigation-timing/" target="_blank" rel="noopener noreferrer">Navigation Timing<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）</p> <ul><li>网络
<ul><li>DNS</li></ul></li> <li>域名/服务端部署
<ul><li>Gzip</li> <li>资源缓存，长cache</li> <li>分域名部署(静态资源域名)</li> <li>减少Cookie</li> <li>CDN加速</li></ul></li> <li>资源加载性能
<ul><li>性能（首字时间、首屏时间）
<ul><li>Navigation Timing 收集HTML文档的性能指标</li> <li><a href="https://developers.google.com/web/tools/chrome-devtools/network-performance/understanding-resource-timing" target="_blank" rel="noopener noreferrer">Resource Timing<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 收集文档相关资源性能指标，如CSS、JS、Image等</li></ul></li> <li>优化
<ul><li>首屏加载</li> <li>延迟加载Lazyload</li> <li>滚屏加载</li> <li>Media Query（响应式加载）srcset</li> <li>Loading进度条</li> <li>避免30*/40*/50*的http status</li> <li>Favicon.ico</li></ul></li> <li>图片
<ul><li>格式选择 jpg vs webp, gif vs png8<br>
对于少量的图片，推荐用<a href="http://zhitu.isux.us/" target="_blank" rel="noopener noreferrer">智图<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>或者<a href="http://www.tinypng.com/" target="_blank" rel="noopener noreferrer">TinyPNG<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>等工具来帮助自己选择合适的大小、格式。</li></ul></li></ul></li> <li>前端性能-关键渲染路径
<ul><li>尽量使用事件代理,避免批量绑定事件</li> <li>Html使用viewport</li> <li>减少dom节点</li> <li>合理使用requestAnimationFrame动画代替setTimeOut</li> <li>tree shaking</li></ul></li> <li>代码规范
<ul><li>避免空src</li> <li>避免空css规则</li></ul></li> <li>服务端接口
<ul><li>接口合并</li> <li>减少接口数据量</li> <li>缓存</li></ul></li> <li>更快一步
<ul><li>单页应用</li> <li>资源离线</li> <li>本地数据持久化和更新机制(版本管理)</li> <li>预加载</li></ul></li></ul> <ol><li>后端处理（Backend）：网站服务器需要花时间从数据库载入数据并生成网页。</li> <li>网络延迟（Network latency）：每个请求需要花时间从客户端抵达服务器并再次返回客户端（请求延迟）。考虑到完整加载一个网站平均需要发出超过100个请求，延迟问题变得更严峻了。</li> <li>前端处理（Frontend）：前端设备渲染网页也需要时间。</li></ol> <p>前端性能</p> <p>影响前端性能最重要的因素在于关键呈现路径（Critical Rendering Path，CRP）。这个概念描述了浏览器将网页呈现给用户的5个必要步骤，如下图所示。</p> <p>根据以上接入流程，我们可以优化的阶段如下：</p> <p>https://gtmetrix.com/analyze.html<br>
https://www.webpagetest.org/<br>
https://www.cnblogs.com/luozhihao/p/4681564.html</p> <p>[window.performance.timing]</p> <p>dns解析，tcp建链，服务器响应等</p> <ul><li>Queuing<br>
如果某个请求正在排队，则指示：
<ul><li>请求已被渲染引擎推迟，因为该请求的优先级被视为低于关键资源（例如脚本/样式）的优先级。 图像经常发生这种情况。</li> <li>请求已被暂停，以等待将要释放的不可用 TCP 套接字。</li> <li>请求已被暂停，因为在 HTTP 1 上，浏览器仅允许每个源拥有六个 TCP 连接。</li> <li>生成磁盘缓存条目所用的时间（通常非常迅速）</li></ul></li> <li>Stalled/Blocking<br>
请求等待发送所用的时间。 可以是等待 Queueing 中介绍的任何一个原因。 此外，此时间包含代理协商所用的任何时间。</li> <li>Proxy Negotiation<br>
与代理服务器连接协商所用的时间。</li> <li>DNS Lookup<br>
执行 DNS 查询所用的时间。 页面上的每一个新域都需要完整的往返才能执行 DNS 查询。</li> <li>Initial Connection / Connecting<br>
建立连接所用的时间，包括 TCP 握手/重试和协商 SSL 的时间。</li> <li>SSL<br>
完成 SSL 握手所用的时间。</li> <li>Request Sent / Sending<br>
发出网络请求所用的时间。 通常不到一毫秒。</li> <li>Waiting (TTFB)<br>
等待初始响应所用的时间，也称为至第一字节的时间。 此时间将捕捉到服务器往返的延迟时间，以及等待服务器传送响应所用的时间。</li> <li>Content Download / Downloading<br>
接收响应数据所用的时间。</li></ul> <h4 id="诊断网络问题"><a href="#诊断网络问题" aria-hidden="true" class="header-anchor">#</a> 诊断网络问题</h4> <p>在 HTTP 1.0/1.1 连接上，Chrome 会将每个主机强制设置为最多六个 TCP 连接。</p> <p><img src="/assets/img/stalled-request-series.a350df40.png" alt="已被加入队列或已被停止的系列"><br>
已被加入队列或已被停止的系列</p> <p>要为传统的 HTTP 1 流量解决此问题，您需要实现<strong>域分片</strong>。也就是在您的应用上设置多个子域，以便提供资源。然后，在子域之间平均分配正在提供的资源。</p> <p>HTTP 1 连接的修复结果<strong>不会</strong>应用到 HTTP 2 连接上。事实上，前者的结果会影响后者。 如果您部署了 HTTP 2，请不要对您的资源进行域分片，因为它与 HTTP 2 的操作方式相反。在 HTTP 2 中，到服务器的单个 TCP 连接作为多路复用连接。这消除了 HTTP 1 中的六个连接限制，并且可以通过单个连接同时传输多个资源。</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQEAAAD3CAMAAAAqjhF/AAACAVBMVEVQifv////m5uaAgP//gIDNzc3Z2tzO0NL29vft7u77+/uYnaEwOUJka3L09PU2P0fu7u+kqKyLkJXY2dtBSlL8/P2sr7Pc3d/Nz9GlqKz7/Pzx8vI/R1Dn6Onq6+v9/f2prLCTl5zu7/Dm5+jv8PGrr7LMztD+/v53fYPw8fH4+fmjp6uMkZb39/f3+PhmbXOHjJK8v8K2ubzGyMs5Qkrk5eaEiY9KUlrs7e7g4eN0eoDLzc9ETFTCxMeytbgzPETKzM/x8fKipqp+hIm5vL+bn6OIjZJOVl63ur5GTlZ5f4WqrrKmqq64u75NVFzl5udxd32Wmp/U1tc8RE2nq6/b3d75+fqPk5jHysxnbXT19fbHyczr7O2coaW/wcTa3N1IUFiusrXFyMpjaXDi5OWorK+UmZ59gojU1tjIy81sc3lob3VzeX+YnKFrcXilqa2QlZqZnqK2ur2Ch4zd3+Cfo6fz9PTh4+RQWF9SWmHZ293z8/S3ur2GjJG6vcCVmp5bYml/hYrEx8ne4OFcY2p2fILy8vPp6uvR09VZYGevs7ZfZm3Q0NCtsLRXX2b6+vvT1ddeZWzQ0tSOk5jDxslWXWT09fW0t7pvdXvX2dqSl5v6+vpUW2N7gYeJjpPq6+y5ubnh4eEAyFMDqfSqqqr19fXd3d0AtEv/mAChiH8DmNydCDcyAAAEtklEQVR4AezQNQKFQAyE4cw+d1dc7n9FrMMbnPnqleQXQRcUyixQaNnS//n/hAVYYDV3gsgKw6Xafqe2AAuwAAuwAAuwAAusN6i23e0nUOBwjJ3Olyuybnc8ni+Ueh+PBbcSn2Pi+7sPv8D/r+nG6w/TQpbt4G+ilHv04O9DcuuBOZoljAJwnULYqVl1xZntYN8b27Zt27Zt2/qrN72fbZ/dsZ+ZBrxMeC30nzdkfODrRz5k5fknlAJ/Fw0QEOhNQcGBLCSUhYVDjWCRUVIgOob7B8bGsXgggSW+WSqcWRKAaBYXmZzCWKoT0tIzMrNYdg6HTK4AkJaH6Jx8VlBYxIoJJaWs7HcVkCOKUaLLWURFpUCxQFU1PQlYxPEaQ0FUrYGbMnldqT9eTwJLdQbqG3yokatNjWhmLf5qa1vFyy8IaBewZx0VnUqXq6JxV+rUgsbfWcCu+2nijFxBPb22fQZuFLCP4/6lbnJiDOvXMQ2A8IGcnF57QM62JtpjsAqgpFyDCbk6gHo0eE1AnsLAkSvkBSzYkGBVP0ggWDfsDJmR0THAZtxv4isEWk1yAqOgVu2YxSQ9E5CrpEBPtIW9DQCu8fZ+0QZQkE4KqFPDHtMmGMV7BeK4nEiB0hmLmdkfI0CNE3PzALCw6L2koeWV1TX+DQIoXufwkTMWLwViSyfACa9lYxMU1A9HgXClJqBp65nAdvdbAhYvBTRMD9j8sFLQnQ6A7LyRt+O/zal1FegO3N0A9j5PIE5DPVLAE7kCNhEs2443C9hn8qctcoJ9lh3m+WaLl6gcOKOE9Rz2sd2I0o1mc8lng3hVEz47BXKHzVc5UuKY5Q8SCD8O2wCgZmpwcuqayVF/BjqfAT4t8P7U1ODtVFwQXo8sD+b1AcAFUPPiyI+8Zdqw+XFtwdESB6hVg0txcc7pygRcK/NcCvwjvWLnbF7hTTmruNm6LahQ75wB4P7sXxGgoIfSYHQF4XHqPkiF6aB3RK5MXfP8VwTANQEwx8kZAKwuIGMuuHv/t29Xhw0EMRBA+6/CMGtsMswMKx+9+U4MzyRpdUvvDQkQeL4dAgQmd2q2rr6du/fAZsnvgb8KECBAYHuXJAsVIECgNQIECBAgQEA9QIAAAb0hAQIzEtjdZLMbb/bVt/NXAQIECGwvlcMf/idJtQABAq0RIECAAAEC6gECBAjoDQkQmI+AWfHfBQgQILCtSBICBKayR3Q8EiBAgAABAuoBAgQI6A0JELBTalpOgACBV2UMAQKLE7jtjgkQIECAAAH1AAECBPSGBAjYKTUtJ0CAwIivsrlLEgIEiveICBAgQIAAAfUAAQIE9IYECNgpNS0nQIDAtiZJCBCYyh4RAQIECBAgoB4gQICA3pAAATulpuUECBC4zRjOjpMQIDCEQDudTq01AgQIECBAQD1AgACB7tEdEyBgp9S0nAABAv2usklSKkCAwF13XBACBAgQIEBAPUCAAIHp9oYECNgpNS0nQIBA5dlxn5wTAgQK9oieQ4AAAQIECKgHCBAg0DG6YwIE7JSalhMgQKB3RZSkQoAAgVaXqQjsqnJxAQIECBDwW6AeIEBAb0iAAAGz4vkLECBAIAmBL2/nGp2ImqvgTiX0AAAAAElFTkSuQmCC" alt="至第一字节的漫长时间"><br>
至第一字节的漫长时间 又称：大片绿色</p> <p>等待时间长表示至第一字节的时间 (TTFB) 漫长。建议将此值控制在 200 毫秒以下。长 TTFB 会揭示两个主要问题之一。</p> <p>请执行以下任一操作：</p> <p>客户端与服务器之间的网络条件较差，或者 2.服务器应用的响应慢<br>
要解决长 TTFB，首先请尽可能缩减网络。理想的情况是将应用托管在本地，然后查看 TTFB 是否仍然很长。如果仍然很长，则需要优化应用的响应速度。可以是优化数据库查询、为特定部分的内容实现缓存，或者修改您的网络服务器配置。很多原因都可能导致后端缓慢。您需要调查您的软件并找出未满足您的性能预算的内容。</p> <p>如果本地托管后 TTFB 仍然漫长，那么问题出在您的客户端与服务器之间的网络上。很多事情都可以阻止网络遍历。客户端与服务器之间有许多点，每个点都有其自己的连接限制并可能引发问题。测试时间是否缩短的最简单方法是将您的应用置于其他主机上，并查看 TTFB 是否有所改善。</p> <p><img src="data:image/png;base64,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" alt="达到吞吐量能力"><br>
达到吞吐量能力 又称：大片蓝色</p> <p>如果您看到 Content Download 阶段花费了大量时间，则提高服务器响应或串联不会有任何帮助。首要的解决办法是减少发送的字节数。</p> <p>https://zhuanlan.zhihu.com/p/23588780</p> <p>什么是TTFB</p> <p>TTFB（Time To First Byte）首字节时间，包含了发送请求到服务器，服务器处理请求并生成响应，服务器响应内容发送到浏览器的时间。只测试浏览器收到第一个字节的时间。这里的第一个字节不是内容，而是HTTP头的第一个字节。</p> <p>网页加载时间节点</p> <ul><li><p>First Byte 首字节</p></li> <li><p>Start Render，First Paint 开始渲染，白屏时间</p></li> <li><p>DOMContentLoaded 网页结构加载解析成DOM</p></li> <li><p>Load 网页加载完成，包括样式图片iframe等加载</p></li> <li><p>http://www.infoq.com/cn/news/2017/06/HTTP-Akamai-mobile</p></li> <li><p>http://www.infoq.com/cn/articles/practice-of-create-a-sub-page-loading-speed-shop</p></li></ul> <h3 id="网络相关"><a href="#网络相关" aria-hidden="true" class="header-anchor">#</a> 网络相关</h3> <h3 id="资源加载"><a href="#资源加载" aria-hidden="true" class="header-anchor">#</a> 资源加载</h3> <h4 id="首屏加载"><a href="#首屏加载" aria-hidden="true" class="header-anchor">#</a> 首屏加载</h4> <h3 id="图片的使用"><a href="#图片的使用" aria-hidden="true" class="header-anchor">#</a> 图片的使用</h3> <p>webp &amp; srcset</p> <p>https://tinypng.com/</p> <h3 id="浏览器渲染性能"><a href="#浏览器渲染性能" aria-hidden="true" class="header-anchor">#</a> 浏览器渲染性能</h3> <p>https://www.jianshu.com/p/a32b890c29b1</p> <ul><li><p>优化渲染性能</p></li> <li><p>http2</p></li> <li><p>代码拆分</p></li> <li><p>优化JavaScript的执行效率</p></li> <li><p>图标方面，由于SVG是基于文本的图像格式，因此可以使用SVGO进行优化</p></li> <li><p>压缩图像、webp、使用视频而不是gif（通常为后者大约 80％左右）</p></li> <li><p>NetworkInformation API（https://developer.mozilla.org/zh-CN/docs/Web/API/NetworkInformation）<br>
requestAnimationFrame<br>
The NetworkInformation API exposes information about the user's network connection. This information can be used to modify application experiences for users on slower networks</p></li></ul> <h3 id="服务器配置"><a href="#服务器配置" aria-hidden="true" class="header-anchor">#</a> 服务器配置</h3> <h3 id="代码规范"><a href="#代码规范" aria-hidden="true" class="header-anchor">#</a> 代码规范</h3> <h3 id="优化的方向"><a href="#优化的方向" aria-hidden="true" class="header-anchor">#</a> 优化的方向</h3> <ul><li><p>http2</p></li> <li><p>preload</p></li> <li><p>https://yuchengkai.cn/docs/zh/frontend/performance.html</p></li> <li><p>http://ddtalk.github.io/blog/2015/09/07/dingding-first/</p></li> <li><p>https://github.com/amfe/article/issues/1</p></li> <li><p>https://www.jianshu.com/p/d857c3ff78d6</p></li> <li><p>https://segmentfault.com/a/1190000002511921</p></li> <li><p>https://juejin.im/entry/591da9f3570c350069831e58</p></li> <li><p>https://tech.jandou.com/h5-performance-optimization-scheme.html</p></li> <li><p>https://www.kancloud.cn/kancloud/h5-performance/48198</p></li> <li><p>https://blog.cnbang.net/tech/3477/</p></li> <li><p>https://cloud.tencent.com/developer/article/1042504</p></li> <li><p>http://www.browserscope.org/network/test</p></li> <li><p>http://www.alloyteam.com/2016/07/httphttp2-0spdyhttps-reading-this-is-enough/</p></li></ul> <p>http2</p> <ul><li>https://www.ibm.com/developerworks/cn/web/wa-http2-under-the-hood/index.html</li> <li>https://zhuanlan.zhihu.com/p/29609078</li> <li>https://fed.renren.com/2017/05/20/websocket-and-tcp-ip/</li> <li>https://developers.google.com/web/fundamentals/performance/http2/?hl=zh-cn</li></ul></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/kitdocs/kitdocs.org/edit/master/docs/topic/performance/README.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2018-8-29 10:07:52</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/topic/benchmark/" class="prev">
          基准测试
        </a></span> <span class="next"><a href="/topic/markdown/">
          MarkDown
        </a>
        →
      </span></p></div>  <div class="footer">Copyright © 2018-present <a target="_blank" href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">（创意共享3.0许可证）</a></div></div> <!----></div></div>
    <script src="/assets/js/46.5135e29d.js" defer></script><script src="/assets/js/app.13c3da71.js" defer></script>
  </body>
</html>
