(window.webpackJsonp=window.webpackJsonp||[]).push([[209],{527:function(t,s,a){"use strict";a.r(s);var n=a(8),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"小程序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小程序","aria-hidden":"true"}},[t._v("#")]),t._v(" 小程序")]),t._v(" "),a("p",[t._v("这里收集小程序开发常见问题，整理开发最佳实践")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://mp.weixin.qq.com/debug/wxadoc/dev/api/",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信小程序API"),a("OutboundLink")],1),t._v(" - ["),a("a",{attrs:{href:"https://mp.weixin.qq.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("wxapp管理平台"),a("OutboundLink")],1),t._v("]")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://docs.alipay.com/mini/framework/app",target:"_blank",rel:"noopener noreferrer"}},[t._v("支付宝小程序API"),a("OutboundLink")],1),t._v(" - ["),a("a",{attrs:{href:"https://openhome.alipay.com/platform/home.htm",target:"_blank",rel:"noopener noreferrer"}},[t._v("aliapp管理平台"),a("OutboundLink")],1),t._v("]\n")])]),t._v(" "),a("h2",{attrs:{id:"开发助手"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发助手","aria-hidden":"true"}},[t._v("#")]),t._v(" 开发助手")]),t._v(" "),a("p",[t._v("微信"),a("strong",[t._v("小程序开发助手")]),t._v("，更方便快捷地查看和预览小程序")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://mp.weixin.qq.com/debug/wxadoc/dev/image/devtools2/mydev/mydev-qrcode.jpg?t=2018228",alt:"微信小程序开发助手"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://gw.alipayobjects.com/zos/skylark-tools/public/files/a380a8c8d56b91fd6939f4a6a96e126d.png",alt:"支付宝小程序开发助手"}})]),t._v(" "),a("h2",{attrs:{id:"常见问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见问题","aria-hidden":"true"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),a("ul",[a("li",[t._v("公共方法提取")]),t._v(" "),a("li",[t._v("页面深度处理")]),t._v(" "),a("li",[t._v("request请求队列优化")]),t._v(" "),a("li",[t._v("缓存使用优化")]),t._v(" "),a("li",[t._v("页面间通信")]),t._v(" "),a("li",[t._v("统计方案")]),t._v(" "),a("li",[t._v("错误上报")]),t._v(" "),a("li",[t._v("小程序使用 iconfont")])]),t._v(" "),a("h2",{attrs:{id:"使用-iconfont"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-iconfont","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用 iconfont")]),t._v(" "),a("ul",[a("li",[t._v("web开发中使用字体图标有很多好处，比如：矢量（无论如何缩放都保持高清）、体积小等等")]),t._v(" "),a("li",[t._v("小程序开发与平时web开发类似，也可以使用字体图标")]),t._v(" "),a("li",[t._v("方案：\n"),a("ul",[a("li",[t._v("src:url()无论本地还是远程地址都不行**？")]),t._v(" "),a("li",[t._v("转成 base64值则都是可以显示的\n"),a("ul",[a("li",[t._v("很多网友推荐将字体图标转化成base64？。虽然这也不乏是一种解决方案，但是，很麻烦。特别是在项目初期，不确定需要用哪些图标的时候，加一个图标转一次，特别心累。")])])]),t._v(" "),a("li",[t._v("通过 iconfont.css 方式")])])])]),t._v(" "),a("h3",{attrs:{id:"_1-通过-iconfont-css-方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-通过-iconfont-css-方式","aria-hidden":"true"}},[t._v("#")]),t._v(" 1 通过 iconfont.css 方式")]),t._v(" "),a("ul",[a("li",[t._v("iconfont 选用 "),a("code",[t._v("font class")]),t._v(" 生成")]),t._v(" "),a("li",[t._v("在全局样式 app.wxss中, 第一行加入代码\n"),a("ul",[a("li",[a("code",[t._v('@import "/style/iconfont";')]),t._v(" 注意后缀名改为 "),a("code",[t._v(".wxss")])])])])]),t._v(" "),a("div",{staticClass:"warning custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),a("p",[t._v("通过加入iconfont.css方式，可以使用单色的iconfont字体，不能使用彩色的")])]),t._v(" "),a("h3",{attrs:{id:"_2-通过转成-base64-方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-通过转成-base64-方式","aria-hidden":"true"}},[t._v("#")]),t._v(" 2 通过转成 base64 方式")]),t._v(" "),a("p",[t._v("小程序的wxss文件font-face的src:url()无论本地还是远程地址都不行，但可以"),a("strong",[t._v("接受base64")])]),t._v(" "),a("ul",[a("li",[t._v("先到字体图标库下载字体图标，找到ttf文件")]),t._v(" "),a("li",[t._v("将ttf文件转换成base64\n"),a("ul",[a("li",[t._v("打开这个平台 "),a("a",{attrs:{href:"https://transfonter.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("transfonter.org"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("点击Add fonts按钮,加载ttf格式的那个文件")]),t._v(" "),a("li",[t._v("将下边的base64 encode改为on")]),t._v(" "),a("li",[t._v("点击Convert按钮 进行转换后 点击download下载")])])]),t._v(" "),a("li",[t._v("新建font.wxss文件，并在app.wxss引用font.wxss\n"),a("ul",[a("li",[t._v("复制下载的压缩文件中的stylesheet.css的内容到font.wxss,并且将icomoon中的style.css除了@font-face所有的代码也复制到font.wxss并将i选择器换成.iconfont")])])]),t._v(" "),a("li",[t._v("最后就可以在wxml中使用字体了\n"),a("ul",[a("li",[a("code",[t._v('<text class="iconfont icon-home" style="font-size:50px;color:red"></text>')])])])])]),t._v(" "),a("h2",{attrs:{id:"注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意事项","aria-hidden":"true"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),a("ul",[a("li",[t._v("微信本地资源无法通过 WXSS 获取(即css无法使用本地图片)")])]),t._v(" "),a("p",[a("code",[t._v("background-image")]),t._v("：可以使用网络图片，或者 base64，或者使用 "),a("code",[t._v("<image/>")]),t._v(" 标签")]),t._v(" "),a("p",[t._v("可以使用脚本批量 "),a("code",[t._v("wxapp-remote")]),t._v(" 处理此问题")]),t._v(" "),a("ul",[a("li",[t._v("首先所有的本地图片引用都放在 "),a("code",[t._v("/img")]),t._v(" 目录下")]),t._v(" "),a("li",[t._v("全部图片引用路径使用 "),a("code",[t._v("./img/xx/xx.png")]),t._v(" 格式")]),t._v(" "),a("li",[t._v("执行脚本批量上传img以及替换引用路径为远程图片")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 初始化")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i 或 yarn\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行脚本")]),t._v("\ngulp remote --path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("/hsq-wxapp\n")])])]),a("ul",[a("li",[t._v("微信中引用不能直接使用根路径，只能使用相对路径")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" api "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/config/api'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 微信只能使用相对路径")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" api "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../../config/api'")]),t._v("\n")])])]),a("ul",[a("li",[t._v("微信引用变量数据要使用 单/双"),a("strong",[t._v("引号")])])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data-id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("{{id}}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n// 要加引号\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("data-id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{{id}}"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("ul",[a("li",[t._v("微信不能在布局模板里直接使用 "),a("code",[t._v(".toFixed(2)")]),t._v(" 方法")])]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v("// 推荐价格全部在js中计算，除非有布局方面要求\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ (price * 0.01).toFixed(2) }}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n改为引用 format 组件\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("wxs")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("../../components/price/index.wxs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("module")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("format"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("view")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{ format(price) }}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("view")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("ul",[a("li",[t._v("关于获取自定义数据，微信、支付宝要全部使用 "),a("code",[t._v("e.currentTarget")])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onClick")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" type "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentTarget"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'login'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("goLogin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// do nothing")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("ul",[a("li",[t._v("关于引用组件，全部使用 "),a("code",[t._v("import")]),t._v("，而引用的组件注意以下事项")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mini "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 组件功能")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 标准写法")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" mini"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 微信小程序使用如下方式")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mini"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入组件使用文件夹路径时 (注意，微信不能省略 `/index`)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  mixins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../../utils/index'")]),t._v("\n")])])])])},[],!1,null,null,null);s.default=e.exports}}]);