import{_ as e,o as a,c as l,V as i}from"./chunks/framework.75ed6a74.js";const t=JSON.parse('{"title":"SPM 超级位置模型","description":"","frontmatter":{},"headers":[{"level":3,"title":"需求背景","slug":"需求背景","link":"#需求背景","children":[]},{"level":3,"title":"设计","slug":"设计","link":"#设计","children":[]}],"relativePath":"system-design/event-tracking/spm.md","filePath":"system-design/event-tracking/spm.md"}'),r={name:"system-design/event-tracking/spm.md"},n=[i('<h1 id="spm-超级位置模型" tabindex="-1">SPM 超级位置模型 <a class="header-anchor" href="#spm-超级位置模型" aria-label="Permalink to &quot;SPM 超级位置模型&quot;">​</a></h1><blockquote><p>SPM，全称超级位置模型（Super Position Model），是大数据中 Web 端和 APP 端采集用户在界面具体位置上的行为日志数据。同时，由 SCM（Super Content Model，超级内容模型）配合来获取位置中的内容，它们一起来完成用户行为细节的数据收集。</p><p>SPM 和 SCM 范式最早由阿里巴巴提出并应用，现已成为大数据采集中数据埋点的重要规范。</p></blockquote><h3 id="需求背景" tabindex="-1">需求背景 <a class="header-anchor" href="#需求背景" aria-label="Permalink to &quot;需求背景&quot;">​</a></h3><p>在统计页面（界面）的访问的指标如 PV、UV 时，是对页面整体进行监控，这时页面级的 PV 日志或者统计服务端 nginx/apache 等产生的请求日志就足以完成。</p><h4 id="spm" tabindex="-1">SPM <a class="header-anchor" href="#spm" aria-label="Permalink to &quot;SPM&quot;">​</a></h4><p>随着数据分析的精细化，不能满足于粗粒度的页面级数据分析，还需要知道用户在页面的哪个位置做了点击、哪个位置做了曝光等等。同时，随着在移动端页面多采用上滑加载、左右滑动等模式，更多的浏览和交互在单一页面完成，因此对于页面位置区块的内容分析诉求就越来越强烈，SPM 便是来解决定位内容位置的标识。</p><h4 id="scm" tabindex="-1">SCM <a class="header-anchor" href="#scm" aria-label="Permalink to &quot;SCM&quot;">​</a></h4><p>那么 SCM（Super Content Model，超级内容模型）又是做什么的呢？试想下这个场景，在一个 APP 中，首页有一个幻灯广告 Banner，它自动更换并共 4 张，那么我们可以用 SPM 标记为 Banner0 到 Banner3，这样就知道了用户点击了哪个 Banner 图。但问题也来了，当时用户点击的 Banner 内容是什么呢？这就需要 SCM 来记录当时的 Banner 内容，因为广告位是不变的，广告内容会随时变化。</p><p>在当前互联网产品形态中，类似千人千面等个性化推荐项目中，软件界面正是提供了类似广告位的固定框架，这个框架相对稳定（当然也会改版，也会做 A/B 测试），内容则是通过大数据分析利用算法为具体用户定制，这时由 SCM 快照当时给用户的内容。</p><h3 id="设计" tabindex="-1">设计 <a class="header-anchor" href="#设计" aria-label="Permalink to &quot;设计&quot;">​</a></h3><h4 id="spm-设计" tabindex="-1">SPM 设计 <a class="header-anchor" href="#spm-设计" aria-label="Permalink to &quot;SPM 设计&quot;">​</a></h4><p>SPM（Super Position Model），全称超级位置模型，用于内容的位置，其设计理念同 UTM，可先阅读理解。</p><p>一般包含四位信息：</p><ul><li>A:站点/业务，一般以站点编码的形式记录，也可记录平台，如 iOS、小程序等</li><li>B:页面，一般对业务进行编号，不同平台的相同对应页面编号相同</li><li>C:页面区块，对页面进行大的区域划分编号</li><li>D:区块内点位：小区域内的位置编号</li></ul><p>以上信息一般没有隐私内容，可显式传输。位置编号一般从 0 开始，也可以用便于识别的字符命名。</p><p>SPM 可搭载在：</p><ul><li>PV 日志：记录被浏览的页面从上一页面的哪个位置点击而来；</li><li>曝光日志：表示哪个位置被曝光；</li><li>事件日志：表示事件发生的位置，如点击的哪个区域、点击了哪个按钮、在哪儿滑动了屏幕</li></ul><p>可以设计多个用途的 SPM，以下是阿里的设计应用：</p><p><img src="/assets/taoabo-spm.f41f6ce7.jpg" alt="SPM 的原理"></p><h4 id="scm-设计" tabindex="-1">SCM 设计 <a class="header-anchor" href="#scm-设计" aria-label="Permalink to &quot;SCM 设计&quot;">​</a></h4><p>SPM（Super Content Model），全称超级内容模型，用于表示位置中的具体内容，其设计理念同 UTM，可先阅读理解。scm 编码是用来跟踪内容的编码。与业务内容一起下发的埋点数据，用来唯一标识一块内容。客户端打点时，将 scm 编码作为埋点的参数上传给日志服务器。</p><p>scm 编码也采用 a.b.c.d 的格式，下边是一个应用设计的示例：</p><ul><li>a 标识投放系统 ID，用来标识不同的内容投放方，比如商城的阿拉丁系统，对应的投放系统 ID 为 1003。</li><li>b 标识投放算法 ID，用来标识投放系统产生不同内容的投放算法。</li><li>c 标识投放算法版本 ID，用来标识投放算法的不同版本。</li><li>d 标识投放人群 ID，用来标识不同的投放人群，或者对接 profile。</li></ul><p>SCM 可以表示内容在配置系统中的映射，如广告在 CMS 系统的的配置 ID，也可以表示内容使用的推荐算法、营销策略等内容。</p><p>SCM 可搭载在：</p><ul><li>PV 日志：记录被浏览的页面从上一页面的哪个位置的什么内容点击而来，可用于分析内容的吸引力；</li><li>曝光日志：表示哪些内容被曝光过；</li><li>事件日志：表示事件发生在什么内容上，如哪个商品被点击，哪个优惠券被刮开。</li></ul><p>参考</p><ul><li><a href="https://juejin.cn/post/6844903808405880845" target="_blank" rel="noreferrer">https://juejin.cn/post/6844903808405880845</a></li></ul>',28)];const s=e(r,[["render",function(e,i,t,r,s,o){return a(),l("div",null,n)}]]);export{t as __pageData,s as default};
