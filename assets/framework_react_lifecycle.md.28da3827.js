import{_ as e,o as t,c as o,V as r}from"./chunks/framework.75ed6a74.js";const a=JSON.parse('{"title":"React lifecycle","description":"","frontmatter":{},"headers":[{"level":2,"title":"ç”Ÿå‘½å‘¨æœŸ","slug":"ç”Ÿå‘½å‘¨æœŸ","link":"#ç”Ÿå‘½å‘¨æœŸ","children":[]},{"level":2,"title":"è¯¦è§£ç”Ÿå‘½å‘¨æœŸ","slug":"è¯¦è§£ç”Ÿå‘½å‘¨æœŸ","link":"#è¯¦è§£ç”Ÿå‘½å‘¨æœŸ","children":[{"level":3,"title":"constructor()","slug":"constructor","link":"#constructor","children":[]},{"level":3,"title":"static getDerivedStateFromProps(nextProps, prevState)","slug":"static-getderivedstatefromprops-nextprops-prevstate","link":"#static-getderivedstatefromprops-nextprops-prevstate","children":[]},{"level":3,"title":"render()","slug":"render","link":"#render","children":[]},{"level":3,"title":"componentDidMount()","slug":"componentdidmount","link":"#componentdidmount","children":[]},{"level":3,"title":"shouldComponentUpdate(nextProps, nextState)","slug":"shouldcomponentupdate-nextprops-nextstate","link":"#shouldcomponentupdate-nextprops-nextstate","children":[]},{"level":3,"title":"getSnapshotBeforeUpdate(prevProps, prevState)","slug":"getsnapshotbeforeupdate-prevprops-prevstate","link":"#getsnapshotbeforeupdate-prevprops-prevstate","children":[]},{"level":3,"title":"componentDidUpdate(prevProps, prevState, snapshot)","slug":"componentdidupdate-prevprops-prevstate-snapshot","link":"#componentdidupdate-prevprops-prevstate-snapshot","children":[]},{"level":3,"title":"componentWillUnmount()","slug":"componentwillunmount","link":"#componentwillunmount","children":[]}]},{"level":2,"title":"ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº","slug":"ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº","link":"#ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº","children":[]}],"relativePath":"framework/react/lifecycle.md","filePath":"framework/react/lifecycle.md"}'),n={name:"framework/react/lifecycle.md"},l=[r('<h1 id="react-lifecycle" tabindex="-1">React lifecycle <a class="header-anchor" href="#react-lifecycle" aria-label="Permalink to &quot;React lifecycle&quot;">â€‹</a></h1><p>ç”Ÿå‘½å‘¨æœŸå‚è§ä¸‹å›¾</p><ul><li><a href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" target="_blank" rel="noreferrer">react ç”Ÿå‘½å‘¨æœŸ</a></li></ul><h2 id="ç”Ÿå‘½å‘¨æœŸ" tabindex="-1">ç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸ" aria-label="Permalink to &quot;ç”Ÿå‘½å‘¨æœŸ&quot;">â€‹</a></h2><ul><li>åˆ›å»ºæŒ‚è½½ <ul><li><code>constructor</code> ğŸ”¥</li><li><code>static getDerivedStateFromProps(nextProps, state)</code></li><li><code>render</code> ğŸ”¥</li><li><code>componentDidMount</code> ğŸ”¥</li></ul></li><li>æ›´æ–° <ul><li><code>static getDerivedStateFromProps(nextProps, state)</code></li><li><code>shouldComponentUpdate</code> ğŸ”¥</li><li><code>render</code></li><li><code>getSnapshotBeforeUpdate</code></li><li><code>componentDidUpdate</code> ğŸ”¥</li></ul></li><li>å¸è½½ <ul><li><code>componentWillUnmount</code> ğŸ”¥</li></ul></li><li>å¼‚å¸¸æ•è· <ul><li>static getDerivedStateFromError(error)</li><li>componentDidCatch(error, errorInfo)</li></ul></li></ul><p>React ä» v16.3 å¼€å§‹åºŸå¼ƒ <code>componentWillMount</code> <code>componentWillReceiveProps</code> <code>componentWillUpdate</code> ä¸‰ä¸ªé’©å­å‡½æ•°</p><h2 id="è¯¦è§£ç”Ÿå‘½å‘¨æœŸ" tabindex="-1">è¯¦è§£ç”Ÿå‘½å‘¨æœŸ <a class="header-anchor" href="#è¯¦è§£ç”Ÿå‘½å‘¨æœŸ" aria-label="Permalink to &quot;è¯¦è§£ç”Ÿå‘½å‘¨æœŸ&quot;">â€‹</a></h2><h3 id="constructor" tabindex="-1">constructor() <a class="header-anchor" href="#constructor" aria-label="Permalink to &quot;constructor()&quot;">â€‹</a></h3><ul><li>super çš„ä½œç”¨ï¼šå°†çˆ¶ç±»çš„ this å¯¹è±¡ç»§æ‰¿ç»™å­ç±» (<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/super#%E6%8F%8F%E8%BF%B0" target="_blank" rel="noreferrer">MDN å‚è€ƒ</a>)</li><li>å¦‚æœä¸åˆå§‹åŒ– state æˆ–ä¸è¿›è¡Œæ–¹æ³•ç»‘å®šï¼Œåˆ™ä¸éœ€è¦å†™ constructor()ï¼Œåªéœ€è¦è®¾ç½® this.state å³å¯</li><li>ä¸èƒ½åœ¨ constructor() æ„é€ å‡½æ•°å†…éƒ¨è°ƒç”¨ this.setState(), å› ä¸ºæ­¤æ—¶ç¬¬ä¸€æ¬¡ render()è¿˜æœªæ‰§è¡Œï¼Œä¹Ÿå°±æ„å‘³ DOM èŠ‚ç‚¹è¿˜æœªæŒ‚è½½</li></ul><h3 id="static-getderivedstatefromprops-nextprops-prevstate" tabindex="-1">static getDerivedStateFromProps(nextProps, prevState) <a class="header-anchor" href="#static-getderivedstatefromprops-nextprops-prevstate" aria-label="Permalink to &quot;static getDerivedStateFromProps(nextProps, prevState)&quot;">â€‹</a></h3><p>æ ¹æ® nextProps å’Œ prevState è®¡ç®—å‡ºé¢„æœŸçš„çŠ¶æ€æ”¹å˜ï¼Œè¿”å›ç»“æœï¼ˆä¸€ä¸ªå¯¹è±¡ï¼‰ä¼šè¢«é€ç»™ setState æ›´æ–° stateï¼Œè¿”å› null åˆ™ä¸æ›´æ–° state</p><p>æ³¨æ„: <code>getDerivedStateFromProps</code> æ˜¯ä¸€ä¸ªé™æ€å‡½æ•°ï¼Œä¸èƒ½ä½¿ç”¨ <code>this</code>ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯åªèƒ½ä½œä¸€äº›æ— å‰¯ä½œç”¨çš„æ“ä½œ</p><p>ä½¿ç”¨åœºæ™¯ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯æä¾›äº†ä¸€ä¸ªæœºä¼šï¼Œå¯ä»¥æ ¹æ®<strong>æ–° props</strong> å’Œ <strong>æ—§ state</strong> æ¥è°ƒæ•´æ–°çš„ state</p><p>ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿè¯·ç§»æ­¥ <a href="https://zhuanlan.zhihu.com/p/38030418" target="_blank" rel="noreferrer">Morgan å¤§ä½¬ - çŸ¥ä¹</a></p><h3 id="render" tabindex="-1">render() <a class="header-anchor" href="#render" aria-label="Permalink to &quot;render()&quot;">â€‹</a></h3><p>æ˜¯ <code>class</code> ç»„ä»¶ä¸­å”¯ä¸€å¿…é¡»å®ç°çš„æ–¹æ³•ï¼Œç”¨äºæ¸²æŸ“ <code>dom</code>ï¼Œ<code>render()</code> æ–¹æ³•å¿…é¡»è¿”å› reactDOM</p><p>ä¸è¦åœ¨ <code>render</code> é‡Œé¢ <code>setState</code>, å¦åˆ™ä¼šè§¦å‘æ­»å¾ªç¯å¯¼è‡´å†…å­˜å´©æºƒ</p><h3 id="componentdidmount" tabindex="-1">componentDidMount() <a class="header-anchor" href="#componentdidmount" aria-label="Permalink to &quot;componentDidMount()&quot;">â€‹</a></h3><p><code>componentDidMount()</code> å†ç»„ä»¶æŒ‚åœ¨åï¼ˆæ’å…¥ DOM æ ‘åï¼‰ç«‹å³è°ƒç”¨ï¼Œ<code>componentDidMount()</code> æ˜¯å‘é€ç½‘ç»œè¯·æ±‚ã€å¯ç”¨äº‹ä»¶ç›‘å¬æ–¹æ³•çš„å¥½æ—¶æœºï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ­¤é’©å­å‡½æ•°é‡Œç›´æ¥è°ƒç”¨ <code>setState</code></p><h3 id="shouldcomponentupdate-nextprops-nextstate" tabindex="-1">shouldComponentUpdate(nextProps, nextState) <a class="header-anchor" href="#shouldcomponentupdate-nextprops-nextstate" aria-label="Permalink to &quot;shouldComponentUpdate(nextProps, nextState)&quot;">â€‹</a></h3><p><code>shouldComponentUpdate()</code> åœ¨ç»„ä»¶æ›´æ–°ä¹‹å‰è°ƒç”¨ï¼Œå¯ä»¥æ§åˆ¶ç»„ä»¶æ˜¯å¦è¿›è¡Œæ›´æ–°ï¼Œ è¿”å› true æ—¶ç»„ä»¶æ›´æ–°ï¼Œ è¿”å› false åˆ™ä¸æ›´æ–°</p><p>å¯ä»¥æ ¹æ®æ›´æ–°å‰åçš„ props æˆ– state æ¥æ¯”è¾ƒåŠ ä¸€äº›é™åˆ¶æ¡ä»¶ï¼Œå†³å®šæ˜¯å¦æ›´æ–°ï¼Œè¿›è¡Œæ€§èƒ½ä¼˜åŒ–</p><div class="info custom-block"><p class="custom-block-title">æ³¨æ„</p><p>ä¸å»ºè®®åœ¨ <code>shouldComponentUpdate()</code> ä¸­è¿›è¡Œæ·±å±‚æ¯”è¾ƒæˆ–å®ç”¨<code>JSON.stringify()</code>ã€‚è¿™æ ·éå¸¸å½±å“æ•ˆç‡ï¼Œä¸”ä¼šæŸå®³æ€§èƒ½ã€‚</p><p>ä¸è¦ <code>shouldComponentUpdate()</code> ä¸­è°ƒç”¨ setState()ï¼Œå¦åˆ™ä¼šå¯¼è‡´æ— é™å¾ªç¯è°ƒç”¨æ›´æ–°ã€æ¸²æŸ“ï¼Œç›´è‡³æµè§ˆå™¨å†…å­˜å´©æºƒ</p><p>å¯ä»¥ä½¿ç”¨å†…ç½® <code>PureComponent</code> ç»„ä»¶æ›¿ä»£</p></div><h3 id="getsnapshotbeforeupdate-prevprops-prevstate" tabindex="-1">getSnapshotBeforeUpdate(prevProps, prevState) <a class="header-anchor" href="#getsnapshotbeforeupdate-prevprops-prevstate" aria-label="Permalink to &quot;getSnapshotBeforeUpdate(prevProps, prevState)&quot;">â€‹</a></h3><p>åœ¨æœ€è¿‘ä¸€æ¬¡çš„æ¸²æŸ“è¾“å‡ºè¢«æäº¤ä¹‹å‰è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ render ä¹‹åï¼Œå³å°†å¯¹ç»„ä»¶è¿›è¡ŒæŒ‚è½½æ—¶è°ƒç”¨ã€‚</p><p>å®ƒå¯ä»¥ä½¿ç»„ä»¶åœ¨ DOM çœŸæ­£æ›´æ–°ä¹‹å‰æ•è·ä¸€äº›ä¿¡æ¯ï¼ˆä¾‹å¦‚æ»šåŠ¨ä½ç½®ï¼‰ï¼Œæ­¤ç”Ÿå‘½å‘¨æœŸè¿”å›çš„ä»»ä½•å€¼éƒ½ä¼šä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>componentDidUpdate()</code> ç¬¬ä¸‰ä¸ªå‚æ•°ã€‚å¦‚æœä¸éœ€è¦ä¼ é€’ä»»ä½•å€¼ï¼Œé‚£ä¹ˆè¯·è¿”å› null</p><h3 id="componentdidupdate-prevprops-prevstate-snapshot" tabindex="-1">componentDidUpdate(prevProps, prevState, snapshot) <a class="header-anchor" href="#componentdidupdate-prevprops-prevstate-snapshot" aria-label="Permalink to &quot;componentDidUpdate(prevProps, prevState, snapshot)&quot;">â€‹</a></h3><p>ä¼šåœ¨æ›´æ–°åè¢«ç«‹å³è°ƒç”¨ã€‚é¦–æ¬¡æ¸²æŸ“ä¸ä¼šæ‰§è¡Œã€‚</p><p>å¯ä»¥è¿›è¡Œå‰å props çš„æ¯”è¾ƒè¿›è¡Œæ¡ä»¶è¯­å¥çš„é™åˆ¶ï¼Œæ¥è¿›è¡Œ setStateï¼Œå¦åˆ™ä¼šå¯¼è‡´æ­»å¾ªç¯ã€‚</p><h3 id="componentwillunmount" tabindex="-1">componentWillUnmount() <a class="header-anchor" href="#componentwillunmount" aria-label="Permalink to &quot;componentWillUnmount()&quot;">â€‹</a></h3><p>åœ¨ç»„ä»¶å³å°†è¢«å¸è½½æˆ–é”€æ¯æ—¶è¿›è¡Œè°ƒç”¨ã€‚</p><p>æ­¤ç”Ÿå‘½å‘¨æœŸæ˜¯<strong>å–æ¶ˆç½‘ç»œè¯·æ±‚ã€ç§»é™¤ç›‘å¬äº‹ä»¶ã€æ¸…ç† DOM å…ƒç´ ã€æ¸…ç†å®šæ—¶å™¨</strong>ç­‰æ“ä½œçš„å¥½æ—¶æœº</p><h2 id="ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº" tabindex="-1">ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº <a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº" aria-label="Permalink to &quot;ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº&quot;">â€‹</a></h2><ul><li>å­ç»„ä»¶è‡ªèº«çŠ¶æ€æ”¹å˜ï¼Œä¸ä¼šå¯¹çˆ¶ç»„ä»¶äº§ç”Ÿå‰¯ä½œç”¨çš„æƒ…å†µä¸‹ï¼Œçˆ¶ç»„ä»¶ä¸ä¼šè¿›è¡Œæ›´æ–°ï¼ˆæ— ç”Ÿå‘½å‘¨æœŸè§¦å‘ï¼‰</li><li>çˆ¶ç»„ä»¶ä¸­çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼ˆåŒ…æ‹¬å­ç»„ä»¶çš„æŒ‚è½½ä»¥åŠå¸è½½ï¼‰æ—¶ï¼Œä¼šè§¦å‘è‡ªèº«å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸä»¥åŠå­ç»„ä»¶çš„æ›´æ–° <ul><li>render ä»¥åŠ render ä¹‹å‰çš„ç”Ÿå‘½å‘¨æœŸï¼Œåˆ™çˆ¶ç»„ä»¶å…ˆæ‰§è¡Œ</li><li>render ä»¥åŠ render ä¹‹åçš„ç”Ÿå‘½å‘¨æœŸï¼Œåˆ™å­ç»„ä»¶å…ˆæ‰§è¡Œï¼Œå¹¶ä¸”æ˜¯ä¸çˆ¶ç»„ä»¶äº¤æ›¿æ‰§è¡Œ</li></ul></li></ul><p>å½“å­ç»„ä»¶è¿›è¡Œå¸è½½æ—¶ï¼Œåªä¼šæ‰§è¡Œè‡ªèº«çš„ <code>componentWillUnmount</code> ç”Ÿå‘½å‘¨æœŸï¼Œä¸ä¼šå†è§¦å‘åˆ«çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><p>å‚è€ƒ</p><ul><li><a href="https://juejin.cn/post/6914112105964634119" target="_blank" rel="noreferrer">æ·±å…¥è¯¦è§£ React ç”Ÿå‘½å‘¨æœŸ</a></li></ul>',37)];const p=e(n,[["render",function(e,r,a,n,p,d){return t(),o("div",null,l)}]]);export{a as __pageData,p as default};
