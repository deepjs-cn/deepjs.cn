import{_ as e,o as a,c as l,V as r}from"./chunks/framework.75ed6a74.js";const t=JSON.parse('{"title":"React Scheduler","description":"","frontmatter":{},"headers":[{"level":3,"title":"React Scheduler 使用 MessageChannel 的原因","slug":"react-scheduler-使用-messagechannel-的原因","link":"#react-scheduler-使用-messagechannel-的原因","children":[]},{"level":3,"title":"为什么不使用微任务呢？","slug":"为什么不使用微任务呢","link":"#为什么不使用微任务呢","children":[]},{"level":3,"title":"为什么不使用 setTimeout(fn, 0) 呢？","slug":"为什么不使用-settimeout-fn-0-呢","link":"#为什么不使用-settimeout-fn-0-呢","children":[]},{"level":3,"title":"为什么不使用 rAF() 呢？","slug":"为什么不使用-raf-呢","link":"#为什么不使用-raf-呢","children":[]}],"relativePath":"framework/react/scheduler.md","filePath":"framework/react/scheduler.md"}'),c={name:"framework/react/scheduler.md"},i=[r('<h1 id="react-scheduler" tabindex="-1">React Scheduler <a class="header-anchor" href="#react-scheduler" aria-label="Permalink to &quot;React Scheduler&quot;">​</a></h1><ul><li>Scheduler 简介 —— 时间分片</li><li>时间分片应选择微任务还是宏任务</li><li>为什么不选择 <code>setTimeout(fn, 0)</code></li><li>为什么不选择 <code>requestAnimationFrame(fn)</code></li></ul><h3 id="react-scheduler-使用-messagechannel-的原因" tabindex="-1">React Scheduler 使用 <code>MessageChannel</code> 的原因 <a class="header-anchor" href="#react-scheduler-使用-messagechannel-的原因" aria-label="Permalink to &quot;React Scheduler 使用 `MessageChannel` 的原因&quot;">​</a></h3><p>为了生成宏任务，实现以下功能</p><ul><li>将主线程还给浏览器，以便浏览器更新页面。</li><li>浏览器更新页面后继续执行未完成的任务。</li></ul><h3 id="为什么不使用微任务呢" tabindex="-1">为什么不使用微任务呢？ <a class="header-anchor" href="#为什么不使用微任务呢" aria-label="Permalink to &quot;为什么不使用微任务呢？&quot;">​</a></h3><p>微任务将在页面更新前全部执行完，所以达不到「将主线程还给浏览器」的目的。</p><h3 id="为什么不使用-settimeout-fn-0-呢" tabindex="-1">为什么不使用 <code>setTimeout(fn, 0)</code> 呢？ <a class="header-anchor" href="#为什么不使用-settimeout-fn-0-呢" aria-label="Permalink to &quot;为什么不使用 `setTimeout(fn, 0)` 呢？&quot;">​</a></h3><p>递归的 <code>setTimeout()</code> 调用会使调用间隔变为 4ms(至少)，导致浪费了 4ms。</p><h3 id="为什么不使用-raf-呢" tabindex="-1">为什么不使用 <code>rAF()</code> 呢？ <a class="header-anchor" href="#为什么不使用-raf-呢" aria-label="Permalink to &quot;为什么不使用 `rAF()` 呢？&quot;">​</a></h3><ul><li>如果上次任务调度不是 <code>rAF()</code> 触发的，将导致在当前帧更新前进行两次任务调度。</li><li>页面更新的时间不确定，如果浏览器间隔了 10ms 才更新页面，那么这 10ms 就浪费了。</li></ul><p>参考</p><ul><li><a href="https://juejin.cn/post/6953804914715803678" target="_blank" rel="noreferrer">React Scheduler 为什么使用 MessageChannel 实现</a></li></ul>',13)];const s=e(c,[["render",function(e,r,t,c,s,n){return a(),l("div",null,i)}]]);export{t as __pageData,s as default};
