import{_ as a,o as e,c as i,V as l}from"./chunks/framework.75ed6a74.js";const t=JSON.parse('{"title":"埋点管理系统","description":"","frontmatter":{},"headers":[{"level":3,"title":"需求背景","slug":"需求背景","link":"#需求背景","children":[]}],"relativePath":"system-design/event-tracking/management-system.md","filePath":"system-design/event-tracking/management-system.md"}'),r={name:"system-design/event-tracking/management-system.md"},n=[l('<h1 id="埋点管理系统" tabindex="-1">埋点管理系统 <a class="header-anchor" href="#埋点管理系统" aria-label="Permalink to &quot;埋点管理系统&quot;">​</a></h1><p>在埋点工作开展初期，大多数团队会以文档形式（Excel、wiki）编写埋点需求，但随着业务的发展，埋点的增多，埋点工作团队协作的频度加大，有一个高效的埋点管理系统就显得非常有必要。本文，我们来梳理一下我们需要一个怎么样的埋点系统，怎么设计一个埋点管理系统。</p><h3 id="需求背景" tabindex="-1">需求背景 <a class="header-anchor" href="#需求背景" aria-label="Permalink to &quot;需求背景&quot;">​</a></h3><p>为什么需要埋点管理系统呢？</p><p>虽然埋点本身技术实现的难度并不高，但是整个埋点的过程可以说十分的复杂繁琐，有非常多细节需要考虑。不是某个角色能独立完成的工作，需要数据团队、研发团队、测试团队、业务团队多方参与。如何让各方高效地协作，采集到业务线真正所需要的数据？埋点上线之后，BI 同学是否能清楚地知道埋点的元数据信息，加工出业务需要的指标？基本上，开发人员都不太愿意做「埋点」的工作，如何去说服他们？这一系列问题都是埋点工作中需要考虑的，到最后，埋点不仅仅是一串能采集用户行为数据的代码，而是一整套能实现业务数据需求的复杂体系，其中包括埋点模型、埋点 SDK、埋点流程规范、埋点工具、用户行为分析平台等等这些内容。</p><p>正由于埋点业务一套非常复杂的体系，需要投入很多的资源和人力去长期的运营，我们对埋点工作的要求就不止是解决采集数据的有无问题，还要关注成本问题、质量问题，也就是说如何以较低的成本稳定产出高质量的埋点？我认为一个好的埋点体系应该同时满足：</p><ul><li>成本低，埋点从需求到开发上线，再到数据分析，各方的操作成本低。</li><li>效率高，埋点模型全面、复用性高，不需要每个埋点需求都走一遍埋点流程。</li><li>质量好，通过机制和上线化的工具保证埋点需求端到端的交付。</li></ul><p><img src="/assets/event-tracking-02.17053071.jpg" alt="埋点工作过程"></p><p>过程拆解：</p><p>在埋点业务流程的每个步骤中 ，我们可以做些什么让能整个埋点体系实现成本更低、更高效、质量更好：</p><ul><li>需求沟通，业务同学要把需求传达给数据团队。我们都知道，沟通是一个时间黑洞，应最大程度地提升埋点需求的沟通效率，让业务人员清楚有埋点需求应该找谁对接、如何把需求描述得清楚。</li><li>埋点设计，重点在于埋点模型，好的埋点模型抽象能力强，能够更全面的覆盖用户行为，也有更好的复用性，设计起来也更加简单，可以极大的提升埋点工作流的效率。埋点模型设计得好还能提升后续数据计算的性能。另外，因为我们考虑的是企业级的埋点体系建设，需要统一的设计。</li><li>需求评审：很必要把埋点当作一条独立的研发流程来看待，设置专门的埋点需求评审，这么做的好处，一方面是让大家重视埋点研发，另一方面，因为参与埋点的团队比较多，可以在需求评审时把大家聚到一起，同步埋点方案、业务价值、研发计划等，协同各方各司其职。</li><li>开发测试：研发和测试按照评审通过的 DRD 进行开发测试。埋点的研发是一项琐碎的工作，并且随着埋点越来越多，埋点代码的管理任务很重，这也是很多研发不愿意埋点的原因，埋点的测试是一件比较困难的事件，很多测试人员之前没有接触过专项工作，需要提供一些线上的工具帮助研发和测试提升效率。</li><li>埋点应用：这个环节主要是要维护好埋点的元数据信息，知道埋点和业务是如何关联，方便 BI 同学加工出业务需要的指标。</li></ul><p>综上，建设一个好的企业级埋点体系，有三个要点：</p><ul><li>设计灵活、全面、复用性高的埋点模型，提升埋点设计的效率，降低埋点应用和管理的成本。</li><li>制定清晰可落地的端到端埋点采集规范，定义埋点工作流以及每个环节的输入输出，保证参与埋点的各方高质量的产品。</li><li>开发线上工具支持埋点的管理、研发、测试验收等工作，提升效率。</li></ul><h4 id="系统功能" tabindex="-1">系统功能 <a class="header-anchor" href="#系统功能" aria-label="Permalink to &quot;系统功能&quot;">​</a></h4><p>系统的功能主要包含以下几个方面：</p><ul><li>事件属性管理</li><li>元事件管理</li><li>埋点测试和校验</li></ul><h4 id="需求管理" tabindex="-1">需求管理 <a class="header-anchor" href="#需求管理" aria-label="Permalink to &quot;需求管理&quot;">​</a></h4><p>可分端，按需求对埋点进行管理，需求可在设计、开发、测试、上线、回收各个阶段进行管理。</p><h4 id="事件管理" tabindex="-1">事件管理 <a class="header-anchor" href="#事件管理" aria-label="Permalink to &quot;事件管理&quot;">​</a></h4><p>创建事件，</p><h4 id="属性管理" tabindex="-1">属性管理 <a class="header-anchor" href="#属性管理" aria-label="Permalink to &quot;属性管理&quot;">​</a></h4><p>统一事件的属性，一个属性多个事件共同，同时对属性进行分组，哪些是公共的哪些是自定义的。</p><h4 id="埋点测试" tabindex="-1">埋点测试 <a class="header-anchor" href="#埋点测试" aria-label="Permalink to &quot;埋点测试&quot;">​</a></h4><p>提供 debug 工具方便开发人员快速进行埋点调试，以及使用事件定义的规范要求，在线上对埋点数据进行校验，尽早发现不符合规范的数据，提高埋点工作的效率和准确性。</p><h4 id="埋点数据" tabindex="-1">埋点数据 <a class="header-anchor" href="#埋点数据" aria-label="Permalink to &quot;埋点数据&quot;">​</a></h4><p>可以查看埋点数据，直接在埋点管理查看相关分析数据。</p><h4 id="埋点质量监控" tabindex="-1">埋点质量监控 <a class="header-anchor" href="#埋点质量监控" aria-label="Permalink to &quot;埋点质量监控&quot;">​</a></h4><p>对埋点上报数据质量进行监控，产出质量报表，发送监控异常信息。</p><p>参考</p><ul><li><a href="https://mp.weixin.qq.com/s/CXKTY_FAd9knRzUG-qA0qw" target="_blank" rel="noreferrer">https://mp.weixin.qq.com/s/CXKTY_FAd9knRzUG-qA0qw</a></li><li><a href="https://mp.weixin.qq.com/s/85yo-EMq4fYh8CqG3lkLnw" target="_blank" rel="noreferrer">https://mp.weixin.qq.com/s/85yo-EMq4fYh8CqG3lkLnw</a></li><li><a href="https://mp.weixin.qq.com/s/c2FP36vWbNUfnBWOYY0ASw" target="_blank" rel="noreferrer">https://mp.weixin.qq.com/s/c2FP36vWbNUfnBWOYY0ASw</a></li></ul>',30)];const s=a(r,[["render",function(a,l,t,r,s,h){return e(),i("div",null,n)}]]);export{t as __pageData,s as default};
